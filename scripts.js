"use strict";function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function e(e){e.classList.toggle("hidden")}var o="https://academy.directlinedev.com";function n(e){var t=e.url,n=e.method,r=void 0===n?"GET":n,n=e.headers,n=void 0===n?{}:n,e=e.body,e=void 0===e?null:e;return fetch("".concat(o).concat(t),{method:r,headers:n,body:e})}var t=document.querySelector(".register"),r=document.querySelector(".register__overlay"),i=document.querySelector(".nav__btn_js"),s=t.querySelector(".register__btn"),d=t.querySelector(".preloader"),l=document.forms.registerForm,u=t.querySelector(".form__input"),f=document.querySelector(".sign-in"),m=document.querySelector(".sign-in__overlay"),v=document.querySelector(".nav__button_js"),h=f.querySelector(".sign-in__btn"),_=f.querySelector(".preloader"),y=document.forms.signInForm,u=f.querySelector(".form__input"),p=document.querySelector(".send-message"),L=document.querySelector(".send-message__overlay"),b=document.querySelector(".footer__button_js"),g=document.querySelector(".send-message__btn"),u=(document.forms.sendMessageForm,p.querySelector(".form__input")),S=document.querySelector(".nav__link"),w=!1;function E(t){var e;t.preventDefault(),w||(w=!0,_.classList.remove("hidden"),e=q(t.target),console.log(e),n({method:"POST",url:"/api/users/login",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;window.location="/pages/profile",function(e){{var t;e?(t=e.token,e=e.userId,localStorage.setItem("token",t),localStorage.setItem("userId",e),v.classList.add("hidden"),i.classList.add("hidden"),S.classList.remove("visually-hidden")):localStorage.getItem("token",void 0)?(v.classList.add("hidden"),i.classList.add("hidden"),S.classList.remove("visually-hidden")):(v.classList.remove("hidden"),i.classList.remove("hidden"),S.classList.add("visually-hidden"))}}(e.data),w=!1,_.classList.add("hidden")}).catch(function(e){j(t.target,e.errors),w=!1,_.classList.add("hidden")}))}function q(e){var t,n={},r=e.querySelectorAll("input"),e=e.querySelectorAll("textarea"),o=c(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;switch(i.type){case"checkbox":!n[i.name]&&i.checked&&(n[i.name]=[]),i.checked&&n[i.name].push(i.value);break;case"radio":i.checked&&(n[i.name]=i.value);break;case"file":n[i.name]=i.files;break;default:n[i.name]=i.value}}}catch(e){o.e(e)}finally{o.f()}var s,a=c(e);try{for(a.s();!(s=a.n()).done;){var d=s.value;n[d.name]=d.value}}catch(e){a.e(e)}finally{a.f()}return n}function k(e,t){e.classList.add("form__input_error");var n=e.parentElement.parentElement,r=n.querySelector(".form__label_error");if(r)return r.innerText=t,void e.addEventListener("change",function(){r.remove();var e,t=c(n.querySelectorAll("input"));try{for(t.s();!(e=t.n()).done;)e.value.classList.remove("form__input_error")}catch(e){t.e(e)}finally{t.f()}});var o=document.createElement("div");o.classList.add("form__label_error"),o.style="display: block;",o.innerText=t,n.insertAdjacentElement("beforeend",o),e.addEventListener("change",function(){o.remove(),e.classList.remove("form__label_error")})}function j(e,t){var n,r=c(e.querySelectorAll("input"));try{for(r.s();!(n=r.n()).done;){var o=n.value;switch(o.type){case"checkbox":case"radio":t[o.name]&&k(o,t[o.name]);break;default:t[o.name]&&function(e,t){var n=document.createElement("div");n.classList.add("form__label_error"),e.classList.add("form__input_error"),n.innerText=t,e.insertAdjacentElement("afterend",n),e.addEventListener("input",function(){n.remove(),e.classList.remove("form__input_error")})}(o,t[o.name])}}}catch(e){r.e(e)}finally{r.f()}}v.addEventListener("click",function(){e(f),m.classList.remove("hidden"),u.focus()}),h.addEventListener("click",function(){e(f),m.classList.add("hidden")}),y.addEventListener("submit",function(e){E(e)}),i.addEventListener("click",function(){e(t),r.classList.remove("hidden"),u.focus()}),s.addEventListener("click",function(){e(t),r.classList.add("hidden")}),l.addEventListener("submit",function(e){var t;(t=e).preventDefault(),w||(w=!0,d.classList.remove("hidden"),e=q(t.target),console.log(e),n({url:"/api/users",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;console.log("then",e),w=!1,d.classList.add("hidden")}).catch(function(e){j(t.target,e.errors),w=!1,d.classList.add("hidden")}))}),b.addEventListener("click",function(){e(p),L.classList.remove("hidden"),u.focus()}),g.addEventListener("click",function(){e(p),L.classList.add("hidden")}),window.addEventListener("keydown",function(e){"Escape"===e.code&&(t.classList.contains("hidden")||(t.classList.add("hidden"),r.classList.add("hidden")))}),window.addEventListener("keydown",function(e){"Escape"===e.code&&(f.classList.contains("hidden")||(f.classList.add("hidden"),m.classList.add("hidden")))}),window.addEventListener("keydown",function(e){"Escape"===e.code&&(p.classList.contains("hidden")||(p.classList.add("hidden"),L.classList.add("hidden")))});var A=document.querySelector(".slider__wrapper_js"),x=A.querySelector(".slider__inner-wrapper_js"),T=x.querySelectorAll(".slider__slide_js"),I=document.querySelector(".slider__button-back_js"),O=document.querySelector(".slider__button-next_js"),P=document.querySelector(".slider__pagination_js"),C=T.length-1,F=A.clientWidth,z=+localStorage.getItem("index"),D=[],J=null;function M(e,t){!(1<arguments.length&&void 0!==t)||t?e.setAttribute("disabled",""):e.removeAttribute("disabled")}function N(){F=A.clientWidth;var e,t=c(T);try{for(t.s();!(e=t.n()).done;)e.value.style.width="".concat(F,"px")}catch(e){t.e(e)}finally{t.f()}}function V(e,t){t=!(1<arguments.length&&void 0!==t)||t;e<0||C<e||(M(O),M(I),x.style.transform="translateX(".concat(e*F*-1,"px)"),t&&(x.style.transition="transform ".concat(500,"ms"),clearTimeout(J),J=setTimeout(function(){x.style.transition=""},500)),D[z].classList.remove("slider__dot_active"),D[e].classList.add("slider__dot_active"),0!==e&&M(I,!1),e!==C&&M(O,!1),z=e,localStorage.setItem("index",e))}N(),O.addEventListener("click",function(){V(z+1)}),I.addEventListener("click",function(){V(z-1)});for(var W,G=function(e){var t=function(e){var t=document.createElement("button");t.classList.add("slider__dot"),e&&t.classList.add("slider__dot_active");return t}(e===z);D.push(t),t.addEventListener("click",function(){V(e)}),P.insertAdjacentElement("beforeend",t)},U=0;U<T.length;U++)G(U);V(z),window.addEventListener("resize",function(){N(),V(z,!1)}),(W=document.querySelector(".button-to-top"))&&(W.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"}),W.classList.add("button-to-top_hidden")}),window.addEventListener("scroll",function(){1500<window.pageYOffset?W.classList.remove("button-to-top_hidden"):W.classList.add("button-to-top_hidden")}));new Swiper(".swiper-container",{direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:2,breakpoints:{720:{slidesPerView:1}}});var b=document.querySelector(".header__btn-mobile"),X=document.querySelector(".mobile-header"),g=document.querySelector(".mobile-header__btn_close");b.addEventListener("click",function(){X.classList.add("mobile-header_open")}),g.addEventListener("click",function(){X.classList.remove("mobile-header_open")}),window.addEventListener("keydown",function(e){"Escape"===e.code&&X.classList.contains("mobile-header_open")&&X.classList.remove("mobile-header_open")});